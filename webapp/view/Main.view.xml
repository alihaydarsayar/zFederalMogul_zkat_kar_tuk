<mvc:View
    controllerName="com.golive.federalmogul.zkatkartuk.controller.Main"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    displayBlock="true"
>
    <Page
        id="page"
        title="{i18n>title}"
        class="sapUiResponsiveContentPadding"
    >
        <content>
            <f:SimpleForm
                id="loginForm"
                editable="true"
                layout="ResponsiveGridLayout"
                title="{i18n>loginTitle}"
                labelSpanXL="6"
                labelSpanL="6"
                labelSpanM="12"
                labelSpanS="12"
                adjustLabelSpan="false"
                emptySpanXL="0"
                emptySpanL="0"
                emptySpanM="0"
                emptySpanS="0"
                columnsXL="2"
                columnsL="2"
                columnsM="1"
                singleContainerFullSize="false"
                visible="{= !${mainView>/formVisible}}"
            >
                <f:content>
                    <Label
                        text="{i18n>userLabel}"
                        required="true"
                    />
                    <ComboBox
                        id="userSelect"
                        items="{path: 'mainModel>/users', sorter: { path: 'Adsoyad' }}"
                        selectedKey="{mainView>/login/username}"
                        change="onUserChange"
                        width="100%"
                    >
                        <core:Item
                            key="{mainModel>Adsoyad}"
                            text="{mainModel>Adsoyad}"
                        />
                    </ComboBox>

                    <Label
                        text="{i18n>passwordLabel}"
                        required="true"
                    />
                    <Input
                        id="passwordInput"
                        type="Password"
                        value="{mainView>/login/password}"
                        visible="{mainView>/passwordVisible}"
                        submit="onLogin"
                        width="100%"
                        maxLength="10"
                    />

                    <Label text="" />
                    <Button
                        id="loginButton"
                        text="{i18n>loginButton}"
                        type="Emphasized"
                        press="onLogin"
                        visible="{mainView>/passwordVisible}"
                        width="100%"
                    />
                </f:content>
            </f:SimpleForm>

            <Panel
                id="mainFormPanel"
                expandable="false"
                expanded="true"
                class="sapUiResponsiveContentPadding"
                visible="{mainView>/formVisible}"
            >
                <headerToolbar>
                    <Toolbar>
                        <Title text="{i18n>formTitle}" />
                        <ToolbarSpacer />
                        <!-- <Button
                            id="clearButton"
                            text="{i18n>clearButton}"
                            icon="sap-icon://clear-all"
                            press="onClear"
                        />
                        <Button
                            id="saveButton"
                            text="{i18n>saveButton}"
                            type="Emphasized"
                            icon="sap-icon://save"
                            press="onSave"
                        /> -->
                    </Toolbar>
                </headerToolbar>
                <content>
                    <f:SimpleForm
                        id="mainForm"
                        editable="true"
                        layout="ResponsiveGridLayout"
                        labelSpanXL="6"
                        labelSpanL="6"
                        labelSpanM="12"
                        labelSpanS="12"
                        adjustLabelSpan="false"
                        emptySpanXL="0"
                        emptySpanL="0"
                        emptySpanM="0"
                        emptySpanS="0"
                        columnsXL="2"
                        columnsL="2"
                        columnsM="1"
                        singleContainerFullSize="false"
                    >
                        <f:content>
                            <Label text="{i18n>userFullNameLabel}" />
                            <Input
                                id="nameInput"
                                value="{mainView>/formData/IvAdsoyad}"
                                editable="false"
                            />

                            <Label
                                text="{i18n>dateLabel}"
                                required="true"
                            />
                            <DatePicker
                                id="datePicker"
                                value="{mainView>/formData/IvTarih}"
                                displayFormat="dd.MM.yyyy"
                                valueFormat="yyyy-MM-ddTHH:mm:ss"
                                required="true"
                                change="_clearValidationState"
                                valueState="{mainView>/validation/tarihState}"
                                valueStateText="{mainView>/validation/tarihStateText}"
                            />

                            <Label
                                text="{i18n>materialLabel}"
                                required="true"
                            />
                            <Input
                                id="materialInput"
                                value="{mainView>/formData/IvMalzeme}"
                                required="true"
                                showSuggestion="true"
                                showValueHelp="true"
                                valueHelpRequest="onMaterialValueHelp"
                                suggestionItems="{
                                     path: '/GetMalzemeSet',
                                     sorter: { path: 'Matnr' },
                                     length: 9999
                                 }"
                                change="_clearValidationState"
                                valueState="{mainView>/validation/malzemeState}"
                                valueStateText="{mainView>/validation/malzemeStateText}"
                                maxSuggestionWidth="auto"
                                maxLength="40"
                            >
                                <suggestionItems>
                                    <core:ListItem
                                        key="{Matnr}"
                                        text="{Matnr}"
                                        additionalText="{Maktx}"
                                    />
                                </suggestionItems>
                            </Input>
                            <!-- <Input
                                id="materialInput"
                                value="{mainView>/formData/IvMalzeme}"
                                required="true"
                                suggest="onMaterialSuggest"
                                submit="onMaterialSearch"
                                showSuggestion="true"
                                showValueHelp="true"
                                valueHelpRequest="onMaterialValueHelp"
                                suggestionItems="{path: 'mainModel>/materials'}"
                                change="_clearValidationState"
                                valueState="{mainView>/validation/malzemeState}"
                                valueStateText="{mainView>/validation/malzemeStateText}"
                            >
                                <suggestionItems>
                                    <core:ListItem
                                        key="{mainModel>Matnr}"
                                        text="{mainModel>Matnr}"
                                        additionalText="{mainModel>Maktx}"
                                    />
                                </suggestionItems>
                            </Input> -->

                            <Label
                                text="{i18n>quantityLabel}"
                                required="true"
                            />
                            <!-- <Input
                                id="quantityInput"
                                value="{
                                    path: 'mainView>/formData/IvMiktar',
                                    type: 'sap.ui.model.type.Float',
                                    formatOptions: { minFractionDigits: 0, maxFractionDigits: 3, groupingEnabled: false },
                                    constraints: { minimum: 0.001 }
                                }"
                                type="Number"
                                required="true"
                                change="_clearValidationState"
                                valueState="{mainView>/validation/miktarState}"
                                valueStateText="{mainView>/validation/miktarStateText}"
                            /> -->
                            <Input
                                id="quantityInput"
                                value="{path:'mainView>/formData/IvMiktar', type: 'com.golive.federalmogul.zkatkartuk.model.types.Quantity'}"
                                required="true"
                                change="_clearValidationState"
                                valueState="{mainView>/validation/miktarState}"
                                valueStateText="{mainView>/validation/miktarStateText}"
                                liveChange="onMiktarLiveChange"
                            />

                            <Label
                                text="{i18n>bandLabel}"
                                required="true"
                            />
                            <!-- <List
                                id="bandList"
                                items="{path: 'mainModel>/bands', sorter: { path: 'Anasira' }}"
                                mode="SingleSelectMaster"
                                selectionChange="onBantSelectionChange"
                                class="sapUiResponsiveContentPadding"
                                width="100%"
                            >
                                <items>
                                    <StandardListItem
                                        title="{mainModel>Ktext}"
                                        key="{mainModel>Bant}"
                                        type="Active"
                                    />
                                </items>
                            </List> -->
                            <ComboBox
                                width="100%"
                                id="select2"
                                showSecondaryValues="true"
                                editable="true"
                                items="{path: 'mainModel>/bands', sorter: { path: 'Bant' }}"
                                change="onBantSelectionChange"
                                selectedKey="{mainView>/formData/IvBant}"
                                value="{mainView>/formData/IvBant}"
                                valueState="{mainView>/validation/bantState}"
                                valueStateText="{mainView>/validation/bantStateText}"
                            >
                                <core:ListItem
                                    key="{mainModel>Bant}"
                                    text="{mainModel>Bant}"
                                    additionalText="{mainModel>Ktext}"
                                />
                            </ComboBox>
                            <Label text="" />
                            <Text
                                text="{mainView>/validation/bantStateText}"
                                visible="{= ${mainView>/validation/bantState} === 'Error'}"
                                class="sapUiNotification-Error"
                            />
                        </f:content>
                    </f:SimpleForm>
                </content>
            </Panel>
        </content>
        <footer>
            <OverflowToolbar>
                <ToolbarSpacer />
                <Button
                    id="clearButton"
                    text="{i18n>clearButton}"
                    icon="sap-icon://clear-all"
                    press="onClear"
                    visible="{mainView>/formVisible}"
                />
                <Button
                    id="saveButton"
                    text="{i18n>saveButton}"
                    type="Emphasized"
                    icon="sap-icon://save"
                    press="onSave"
                    visible="{mainView>/formVisible}"
                />
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
